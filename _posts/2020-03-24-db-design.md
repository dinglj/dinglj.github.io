---
layout : post
title : "数据库,设计规范"
category : 规范
duoshuo: true
date : 2020-03-24
tags : [数据库,设计规范]
---
说明

    统一一些基本的数据库设计规范（也是设计的基本要点）。

表设计规范

    1）每张表要有主键:优先考虑int，再考虑使用bigint。（要考虑数据容量的预估，不要做过度设计，非特殊情况，则反对使用varchar之类的字符串做主键）

    2）字符编码:优先utf8mb4，再考虑使用utf8。（要考虑特殊字符的编码情况，确保业务是否会出现）

    3）每张表要保留:create_time,create_by,update_time,update_by ,

         此时时间类型优先考虑使用timestamp。（一方面考虑产品排查问题，第二方面考虑未来的数据同步，也是原有永辉的一个规范）

    4）枚举类型:优先考虑使用tinyint,尽量不要用字符串直接表示，字段的备注信息要完善。（考虑未来该字段建立索引的性能）

    5）所有表和字段都要加备注。(线上产品和dba运维更新数据时的校对）

    6）所有字段尽量设计为not null。（考虑未来该字段建立索引的性能,也是原有永辉的一个规范）

    7）表名和字段名英文单词之间采用_进行隔离。（考虑mybatis的代码生成问题）



线上备份规范

    1）定时的本地冷备份。（一般保留一周数据，看业务情况和数据量确定） mysql 定时备份

    2）在线的异地热备份。（采用mysql读写分离）
